dataset = dataset_wrapper.cached
    dataset = dataset_wrapper.normalized
        mean = true
        std = true
        drop_percentile = null

        dataset = dataset_wrapper.bbox_extraction
            dataset = dataset.brats2017(data_path = "/nmnt/t01-ssd/brats2017/train")

train_ids = meta.from_json
    path = train_ids_path
val_ids = meta.from_json
    path = val_ids_path
ids = meta.from_json
    path = ids_path

experiment = experiment.flat
    makefile = "train_segm_evaluate"
    config_path = config_path
    experiment_path = experiment_path
    split = split.cv_111
        n_splits = 5
        val_size = 6
        dataset = dataset

load_x = meta.extractor
    property = "load_mscan"
    module = dataset

load_y = meta.extractor
    property = "load_segm"
    module = dataset

batch_iter_factory = batch_iter_factory.inf
    n_iters_per_batch = 100

    get_batch_iter = batch_iter.patch_3d_strat
        @init = false
        batch_size = 64
        x_patch_sizes = [[25, 25, 25], [57, 57, 57]]
        y_patch_size = [9, 9, 9]
        nonzero_fraction = 0.5
        buffer_size = 10
        ids = train_ids
        load_x = load_x
        load_y = load_y

model_core = model_core.deepmedic_els
    n_parts = [1 1 1]
    with_dropout = false
    downsampling_type = "sampling"
    n_chans_in = meta.extractor
        property = "n_chans_mscan"
        module = dataset

    n_chans_out = meta.extractor
        property = "n_chans_segm"
        module = dataset

predict = predict.softmax
    @init = false

model = model.model
    model_core = model_core
    predict = predict
    loss = loss.sparse_softmax_cross_entropy
        @init = false

    optimize = optimize.tf_optimize
        @init = false
        tf_optimizer_name = "MomentumOptimizer"
        use_nesterov = true
        momentum = 0.9

frozen_model = model.frozen_model
    model_core = model_core
    predict = predict

batch_predict = batch_predict.patch_3d
    x_spatial_patch_sizes = [[136, 136, 136], [168, 168, 168]]
    y_spatial_patch_size = [120, 120, 120]
    padding_mode = "min"

train = train.train_segm
    @init = false

    n_epochs = 120
    lr_init = 0.1
    lr_dec_mul = 0.5
    patience = 5
    rtol = 0.03
    atol = 0.01
    model = model
    train_batch_iter_factory = batch_iter_factory
    val_ids = val_ids
    dataset = dataset
    batch_predict = batch_predict

pred2msegm = transform.segm_prob2msegm
    @init = false
    dataset = dataset

